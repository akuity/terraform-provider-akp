---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "akp_instance Resource - akp"
subcategory: ""
description: |-
  Create an Argo CD instance
---

# akp_instance (Resource)

Create an Argo CD instance

## Example Usage

```terraform
resource "akp_instance" "example" {
  name           = "example-argocd-instance-name"
  version        = "v2.6.0"
  description    = "Some description"
  default_policy = "role:readonly"
  subdomain      = "custom"
  web_terminal = {
    enabled = true
  }
  secrets = {
    sso_secret = {
      value = "secret"
    }
  }
  image_updater = {
    secrets = {
      docker_json = {
        value = "secret"
      }
    }
    registries = {
      docker = {
        prefix      = "docker.io"
        api_url     = "https://registry-1.docker.io"
        credentials = "secret:argocd/argocd-image-updater-secret#docker_json"
      }
    }
  }
  declarative_management_enabled = true
  image_updater_enabled          = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Instance Name
- `version` (String) Argo CD version. Should be equal to any [argo cd image tag](https://quay.io/repository/argoproj/argocd?tab=tags).<br>Note that `2.5.3` will result a degraded instance! Use `v2.5.3`

### Optional

- `admin_enabled` (Boolean) Enable Admin Login
- `allow_anonymous` (Boolean) Allow Anonymous Access
- `audit_extension_enabled` (Boolean) Enable Audit Extension. Set this to `true` to install Audit Extension to Argo CD instance. Do not use `spec.extensions` for that
- `backend_ip_allow_list` (Boolean) Apply IP Allow List to Cluster Agents
- `banner` (Attributes) Argo CD Banner Configuration (see [below for nested schema](#nestedatt--banner))
- `chat` (Attributes) Chat Configuration (see [below for nested schema](#nestedatt--chat))
- `cluster_customization_defaults` (Attributes) Default Values For Cluster Agents (see [below for nested schema](#nestedatt--cluster_customization_defaults))
- `declarative_management_enabled` (Boolean) Enable Declarative Management
- `default_policy` (String) Value of `policy.default` in `argocd-rbac-cm` configmap
- `description` (String) Instance Description
- `dex` (String) Dex Config YAML
- `extensions` (Attributes List) Extensions (see [below for nested schema](#nestedatt--extensions))
- `google_analytics` (Attributes) Google Analytics Configuration (see [below for nested schema](#nestedatt--google_analytics))
- `helm` (Attributes) Helm Configuration (see [below for nested schema](#nestedatt--helm))
- `helm_enabled` (Boolean) Enable Helm
- `image_updater` (Attributes) Image Updater Settings (see [below for nested schema](#nestedatt--image_updater))
- `image_updater_enabled` (Boolean) Enable Image Updater
- `instance_label_key` (String) Instance Label Key
- `ip_allow_list` (Attributes List) IP Allow List (see [below for nested schema](#nestedatt--ip_allow_list))
- `kustomize` (Attributes) Kustomize Settings (see [below for nested schema](#nestedatt--kustomize))
- `kustomize_enabled` (Boolean) Enable Kustomize
- `notifications` (Attributes) Notifications (see [below for nested schema](#nestedatt--notifications))
- `oidc` (String) OIDC Config YAML
- `oidc_scopes` (List of String) List of OIDC scopes
- `policy_csv` (String) Value of `policy.csv` in `argocd-rbac-cm` configmap
- `repo_server_delegate` (Attributes) In case some clusters don't have network access to your private Git provider you can delegate these operations to one specific cluster. (see [below for nested schema](#nestedatt--repo_server_delegate))
- `resource_settings` (Attributes) Custom resource settings (see [below for nested schema](#nestedatt--resource_settings))
- `secrets` (Attributes Map) Map of secrets used in SSO Configuration (OIDC or DEX config YAML) (see [below for nested schema](#nestedatt--secrets))
- `status_badge` (Attributes) Status Badge Configuration (see [below for nested schema](#nestedatt--status_badge))
- `subdomain` (String) Instance Subdomain. By default equals to instance id
- `users_session` (String) Users Session Duration
- `web_terminal` (Attributes) Web Terminal Config (see [below for nested schema](#nestedatt--web_terminal))

### Read-Only

- `hostname` (String) Instance hostname
- `id` (String) Instance ID

<a id="nestedatt--banner"></a>
### Nested Schema for `banner`

Required:

- `message` (String) Banner Message

Optional:

- `permanent` (Boolean) Disable hide button
- `url` (String) Banner Hyperlink URL


<a id="nestedatt--chat"></a>
### Nested Schema for `chat`

Required:

- `message` (String) Alert Message

Optional:

- `url` (String) Alert URL


<a id="nestedatt--cluster_customization_defaults"></a>
### Nested Schema for `cluster_customization_defaults`

Optional:

- `auto_upgrade_disabled` (Boolean) Disable Agent Auto-upgrade


<a id="nestedatt--extensions"></a>
### Nested Schema for `extensions`

Required:

- `id` (String) Extension ID
- `version` (String) Extension version


<a id="nestedatt--google_analytics"></a>
### Nested Schema for `google_analytics`

Required:

- `anonymize_users` (Boolean) Anonymize Users
- `tracking_id` (String) Google Tracking ID


<a id="nestedatt--helm"></a>
### Nested Schema for `helm`

Required:

- `value_file_schemas` (String) Value File Schemas


<a id="nestedatt--image_updater"></a>
### Nested Schema for `image_updater`

Optional:

- `git_email` (String) User email used in git commit
- `git_template` (String) Commit Message Template for `git` write-back method. Available variables are `{{AppName}}`, `{{AppChanges}}`. [More info](https://argocd-image-updater.readthedocs.io/en/stable/basics/update-methods/#changing-the-git-commit-message)
- `git_user` (String) User name used in git commit
- `log_level` (String) Log level of Image Updater Controller. One of `error`, `warn`, `info`, `debug` or `trace`
- `registries` (Attributes Map) Custom container registries. Not required for most public registries. [More info](https://argocd-image-updater.readthedocs.io/en/stable/configuration/registries/#configuring-custom-registries) (see [below for nested schema](#nestedatt--image_updater--registries))
- `secrets` (Attributes Map) Map of secrets used in Image Updater Configuration (see [below for nested schema](#nestedatt--image_updater--secrets))
- `ssh_config` (String) SSH Client configuration (~/.ssh/config) in Image Updater

<a id="nestedatt--image_updater--registries"></a>
### Nested Schema for `image_updater.registries`

Required:

- `prefix` (String)

Optional:

- `api_url` (String)
- `credentials` (String) Link to the configured secret. Must be in format `secret:argocd/argocd-image-updater-secret#<secret-name>`
- `credsexpire` (String)
- `default` (Boolean)
- `defaultns` (String)
- `insecure` (Boolean)
- `limit` (String)


<a id="nestedatt--image_updater--secrets"></a>
### Nested Schema for `image_updater.secrets`

Required:

- `value` (String, Sensitive)



<a id="nestedatt--ip_allow_list"></a>
### Nested Schema for `ip_allow_list`

Required:

- `ip` (String) IP Address

Optional:

- `description` (String) IP Description


<a id="nestedatt--kustomize"></a>
### Nested Schema for `kustomize`

Required:

- `build_options` (String) Build options


<a id="nestedatt--notifications"></a>
### Nested Schema for `notifications`

Optional:

- `config` (Map of String) Notification configuration. Similar to `argocd-notifications-cm` configmap. Contains [triggers](https://argocd-notifications.readthedocs.io/en/stable/triggers/), [templates](https://argocd-notifications.readthedocs.io/en/stable/templates/) and [services](https://argocd-notifications.readthedocs.io/en/stable/services/overview/)
- `secrets` (Attributes Map) Map of secrets used in Notification Settings (see [below for nested schema](#nestedatt--notifications--secrets))

<a id="nestedatt--notifications--secrets"></a>
### Nested Schema for `notifications.secrets`

Required:

- `value` (String, Sensitive)



<a id="nestedatt--repo_server_delegate"></a>
### Nested Schema for `repo_server_delegate`

Optional:

- `managed_cluster` (Attributes) Cluster (see [below for nested schema](#nestedatt--repo_server_delegate--managed_cluster))

Read-Only:

- `control_plane` (Attributes) Redundant. Always `null` (see [below for nested schema](#nestedatt--repo_server_delegate--control_plane))

<a id="nestedatt--repo_server_delegate--managed_cluster"></a>
### Nested Schema for `repo_server_delegate.managed_cluster`

Required:

- `cluster_name` (String) Cluster Name


<a id="nestedatt--repo_server_delegate--control_plane"></a>
### Nested Schema for `repo_server_delegate.control_plane`



<a id="nestedatt--resource_settings"></a>
### Nested Schema for `resource_settings`

Optional:

- `compare_options` (String) Compare Options
- `exclusions` (String) Exclusions
- `inclusions` (String) Inclusions


<a id="nestedatt--secrets"></a>
### Nested Schema for `secrets`

Required:

- `value` (String, Sensitive) Akuity API does not return secret values. Provider will try to update the secret value on every apply


<a id="nestedatt--status_badge"></a>
### Nested Schema for `status_badge`

Required:

- `enabled` (Boolean) Enable Status Badge

Optional:

- `url` (String) URL


<a id="nestedatt--web_terminal"></a>
### Nested Schema for `web_terminal`

Required:

- `enabled` (Boolean) Enable Web Terminal

Optional:

- `shells` (String) Shells


