---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "akp_kargo_instance Resource - akp"
subcategory: ""
description: |-
  Manages an AKP Kargo instance.
---

# akp_kargo_instance (Resource)

Manages an AKP Kargo instance.

## Example Usage (Basic)
```terraform
resource "akp_kargo_instance" "example" {
  name = "test"
  kargo = {
    spec = {
      version             = "v1.1.1"
      kargo_instance_spec = {}
    }
  }
}
```

## Example Usage (Exhaustive)
```terraform
resource "akp_kargo_instance" "example" {
  name = "test"
  kargo = {
    spec = {
      description = "test-description"
      version     = "v1.1.1"
      kargo_instance_spec = {
        backend_ip_allow_list_enabled = true
        ip_allow_list = [
          {
            ip          = "66.66.66.66"
            description = "test-description"
          }
        ]
        agent_customization_defaults = {
          auto_upgrade_disabled = true
          kustomization         = <<-EOT
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
images:
  - name: ghcr.io/akuity/kargo
    newName: quay.io/akuityy/kargo
  - name: quay.io/akuityio/argo-rollouts
    newName: quay.io/akuityy/argo-rollouts
  - name: quay.io/akuity/agent
    newName: quay.io/akuityy/agent
EOT
        }
        default_shard_agent       = "test"
        global_credentials_ns     = ["test1", "test2"]
        global_service_account_ns = ["test3", "test4"]
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `kargo` (Attributes) Kargo instance configuration (see [below for nested schema](#nestedatt--kargo))
- `name` (String) Kargo Instance name

### Read-Only

- `id` (String) Kargo Instance ID

<a id="nestedatt--kargo"></a>
### Nested Schema for `kargo`

Required:

- `spec` (Attributes) Kargo instance spec (see [below for nested schema](#nestedatt--kargo--spec))

<a id="nestedatt--kargo--spec"></a>
### Nested Schema for `kargo.spec`

Required:

- `kargo_instance_spec` (Attributes) Kargo instance spec (see [below for nested schema](#nestedatt--kargo--spec--kargo_instance_spec))
- `version` (String) Version of the Kargo instance

Optional:

- `description` (String) Description of the Kargo instance

<a id="nestedatt--kargo--spec--kargo_instance_spec"></a>
### Nested Schema for `kargo.spec.kargo_instance_spec`

Optional:

- `agent_customization_defaults` (Attributes) Default agent customization settings (see [below for nested schema](#nestedatt--kargo--spec--kargo_instance_spec--agent_customization_defaults))
- `backend_ip_allow_list_enabled` (Boolean) Whether IP allow list is enabled for the backend
- `default_shard_agent` (String) Default shard agent
- `global_credentials_ns` (List of String) List of global credentials namespaces
- `global_service_account_ns` (List of String) List of global service account namespaces
- `ip_allow_list` (Attributes List) List of allowed IPs (see [below for nested schema](#nestedatt--kargo--spec--kargo_instance_spec--ip_allow_list))

<a id="nestedatt--kargo--spec--kargo_instance_spec--agent_customization_defaults"></a>
### Nested Schema for `kargo.spec.kargo_instance_spec.agent_customization_defaults`

Optional:

- `auto_upgrade_disabled` (Boolean) Whether auto upgrade is disabled
- `kustomization` (String) Kustomization that will be applied to the Kargo agent to generate agent installation manifests


<a id="nestedatt--kargo--spec--kargo_instance_spec--ip_allow_list"></a>
### Nested Schema for `kargo.spec.kargo_instance_spec.ip_allow_list`

Required:

- `ip` (String) IP Address

Optional:

- `description` (String) Description

## Import

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import the AKP Kargo instance using its `name`. For example:

```terraform
import {
  to = akp_kargo_instance.example
  id = "test"
}
```

Using `terraform import`, import AKP Kargo instance using its `name`. For example:

```shell
terraform import akp_kargo_instance.example test
```
